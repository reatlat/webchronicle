(()=>{var d=(...e)=>{(location.hostname.match("local")||window.sessionStorage.unicorn)&&console.log("\u{1F984}:",...e)};function c(e){return String(e??"").replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim()}function z(e){return String(e??"").replace(/\s+/g," ").trim()}function W(e){let t=c(String(e??"")),s=t.replace(/[\r\n]+/g," ").split(/(?<=[.!?])\s+(?=[A-Z0-9"'\(\[])|(?<=[.!?])$/gm).map(r=>r.trim()).filter(Boolean);return s.length?s:t.trim()?[t.trim()]:[]}function k(e){let t=c(String(e??"")),s=/[\p{L}\p{M}\p{Nd}'-]+/gu,r=[],n;for(;(n=s.exec(t))!==null;){let i=n[0].toLowerCase();r.push(i.replace(/^["'\-]+|["'\-]+$/g,""))}return r.filter(Boolean)}function M(e){let s=c(String(e??"")).match(/[A-Za-z\p{L}\p{M}]/gu);return s?s.length:0}function A(e){let s=c(String(e??"")).match(/[A-Za-z0-9\p{L}\p{M}\p{Nd}]/gu);return s?s.length:0}function L(e){if(!e)return 0;let t=String(e).toLowerCase().replace(/[^a-z\p{L}\p{M}]/gu,"");if(!t)return 0;let s=new Map([["the",1],["are",1],["hour",1],["our",1],["fire",1],["queue",1],["people",2],["business",2],["mrs",2],["mr",2],["ms",1]]);if(s.has(t))return s.get(t);let r=t.replace(/e$/i,""),n=r.match(/[aeiouy\p{M}]{1,}/gi),i=n?n.length:0;return/ia|io|eo|ua|iu/gi.test(r)&&(i+=0),r.length<=3&&(i=1),Math.max(1,i)}function I(e){let t=0;for(let s of e)t+=L(s);return t}function E(e){let t=0;for(let s of e)L(s)>=3&&t++;return t}function o(e,t){return e=Number(e)||0,t=Number(t)||0,t===0?0:e/t}function T(e){return e>=90?{label:"Very easy",level:"very-easy"}:e>=80?{label:"Easy",level:"easy"}:e>=70?{label:"Fairly easy",level:"fairly-easy"}:e>=60?{label:"Standard",level:"standard"}:e>=50?{label:"Fairly difficult",level:"fairly-difficult"}:e>=30?{label:"Difficult",level:"difficult"}:{label:"Very difficult",level:"very-difficult"}}function C(e){return e<=5?{label:"Very easy (grade \u22645)",level:"very-easy"}:e<=8?{label:"Easy/Standard (grade 6\u20138)",level:"standard"}:e<=12?{label:"Challenging (grade 9\u201312)",level:"challenging"}:e<=16?{label:"Difficult (college)",level:"difficult"}:{label:"Very difficult (professional)",level:"very-difficult"}}function B({avgSentenceLen:e,complexRatio:t,readingEase:s,gradeFk:r,gradeFog:n,gradeSmog:i}){let a=[];return e>20&&a.push("Shorten sentences \u2014 aim for under 20 words each."),t>.15&&a.push("Replace complex (3+ syllable) words with simpler alternatives where possible."),s<60&&a.push("Target a Flesch Reading Ease of 60\u201370 for general audiences."),(r+n+i)/3>10&&a.push("Aim for grade 7\u20138 to reach a broader audience."),a.length||a.push("Great job \u2014 your text looks easy to read. Keep sentences concise and vocabulary simple."),a}document.addEventListener("alpine:init",()=>{Alpine.data("ReadabilityScoreChecker",()=>({inputText:"",buttonLabel:"Analyze Readability",state:"idle",showResults:!1,errorMessage:"",sentences:0,words:0,uniqueWords:0,characters:0,letters:0,syllables:0,complexWords:0,avgSentenceLen:0,avgSyllablesPerWord:0,readingEase:0,fkGrade:0,fogIndex:0,smogIndex:0,colemanLiau:0,ari:0,suggestions:[],setButtonLabel(){switch(this.state){case"analyzing":this.buttonLabel="Analyzing\u2026";break;case"success":this.buttonLabel="Analyze Again";break;case"error":this.buttonLabel="Try Again";break;default:this.buttonLabel="Analyze Readability"}},reset(){this.inputText="",this.state="idle",this.showResults=!1,this.errorMessage="",this.sentences=this.words=this.uniqueWords=this.characters=this.letters=this.syllables=this.complexWords=0,this.avgSentenceLen=this.avgSyllablesPerWord=0,this.readingEase=this.fkGrade=this.fogIndex=this.smogIndex=this.colemanLiau=this.ari=0,this.suggestions=[],this.setButtonLabel(),this.$nextTick(()=>this.$refs?.inputText?.focus?.())},analyze(e){e&&typeof e.preventDefault=="function"&&e.preventDefault();try{let t=z(c(this.inputText||""));if(!t){this.state="error",this.errorMessage="Please enter some text to analyze.",this.showResults=!1,this.setButtonLabel();return}this.state="analyzing",this.setButtonLabel(),this.showResults=!1;let s=W(t),r=k(t),n=r.length,i=new Set(r).size,a=M(t),f=A(t),p=I(r),h=E(r),u=s.length||(n?1:0),l=o(n,u),g=o(p,n),m=206.835-1.015*l-84.6*g,y=.39*l+11.8*g-15.59,b=.4*(l+100*o(h,n)),v=u>0?1.043*Math.sqrt(30*o(h,u))+3.1291:0,S=100*o(a,n),w=100*o(u,n),x=.0588*S-.296*w-15.8,R=4.71*o(f,n)+.5*l-21.43;this.sentences=u,this.words=n,this.uniqueWords=i,this.characters=f,this.letters=a,this.syllables=Math.round(p),this.complexWords=h,this.avgSentenceLen=l,this.avgSyllablesPerWord=g,this.readingEase=m,this.fkGrade=y,this.fogIndex=b,this.smogIndex=v,this.colemanLiau=x,this.ari=R,this.suggestions=B({avgSentenceLen:l,complexRatio:o(h,n),readingEase:m,gradeFk:y,gradeFog:b,gradeSmog:v}),this.state="success",this.setButtonLabel(),this.showResults=!0,d("Readability analyzed")}catch(t){console.error(t),this.state="error",this.errorMessage=t?.message||"Something went wrong. Please try again.",this.setButtonLabel(),this.showResults=!1}},readingEaseInfo(){return T(this.readingEase)},gradeInfo(e){return C(e)},init(){d("Readability Score Checker initialized")}}))});})();
